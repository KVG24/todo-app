(()=>{"use strict";const e=document.querySelector(".projects");class t{constructor(e){this.title=e,this.tasks=[],this.id=Math.random().toString().split(".").join("")}render(){const t=document.createElement("div");t.classList.add("project"),t.setAttribute("id",this.id);const n=document.createElement("h3");n.classList.add("project-title"),n.textContent=this.title;const s=document.createElement("button");s.classList.add("delete-project"),s.textContent="Delete",s.addEventListener("click",(()=>{this.delete()})),t.appendChild(n),t.appendChild(s),e.appendChild(t),t.addEventListener("click",(()=>{d=this,d.active=!1,this.renderTasks(),document.querySelectorAll(".project").forEach((e=>e.classList.value="project")),t.classList.value.includes("active")||t.classList.add("active")}))}delete(){n=n.filter((e=>e.id!==this.id)),t.renderProjects()}renderTasks(){document.querySelector(".tasks").replaceChildren(),this.tasks.forEach((e=>e.render()))}static renderProjects(){e.replaceChildren(),n.forEach((e=>e.render()))}static setCurrentProject(e){d=e}}let n=[new t("Example")],d=n[0];const s=document.querySelector(".tasks");class i{constructor(e,t,n,d){this.title=e,this.description=t,this.date=n,this.priority=d,this.id=Math.random().toString().split(".").join("")}render(){const e=document.createElement("div");e.classList.add("task"),e.setAttribute("id",this.id);const t=document.createElement("h3");t.setAttribute("id","task-title"),t.textContent=this.title;const n=document.createElement("p");n.setAttribute("id","description"),n.textContent=this.description;const d=document.createElement("p");d.setAttribute("id","due"),d.textContent="Due: ";const i=document.createElement("span");i.setAttribute("id","task-date"),this.date?i.textContent=this.date:i.textContent="No deadline",d.appendChild(i);const c=document.createElement("p");c.setAttribute("id","priority-text"),c.textContent="Priority: ";const l=document.createElement("span");l.setAttribute("id","priority"),l.textContent=this.priority,c.appendChild(l);const o=document.createElement("div");o.classList.add("buttons");const a=document.createElement("button");a.classList.add("complete-btn"),a.textContent="Complete";const r=document.createElement("button");r.classList.add("edit-btn"),r.textContent="Edit";const m=document.createElement("button");m.classList.add("delete-btn"),m.textContent="Delete",o.appendChild(a),o.appendChild(r),o.appendChild(m),a.addEventListener("click",(()=>{e.classList.value.includes("complete")?(e.classList.remove("complete"),t.style.textDecoration="none"):(e.classList.add("complete"),t.style.textDecoration="line-through")})),r.addEventListener("click",(()=>{this.edit()})),m.addEventListener("click",(()=>{this.delete()})),e.appendChild(t),e.appendChild(n),e.appendChild(d),e.appendChild(c),e.appendChild(o),s.appendChild(e)}delete(){d.tasks=d.tasks.filter((e=>e.id!==this.id)),d.renderTasks()}edit(){const e=document.querySelector(".task-edit-modal");e.style.display="flex",document.getElementById("edit-task-btn").addEventListener("click",(t=>{t.preventDefault();const n=document.getElementById("task-title-edit"),s=document.getElementById("task-desc-edit"),i=document.getElementById("task-date-edit"),c=document.getElementById("task-priority-edit");this.title=n.value,this.description=s.value,this.date=i.value,this.priority=c.value,e.style.display="none",d.renderTasks(),n.removeChild(),s.removeChild(),i.removeChild(),c.removeChild()})),document.getElementById("close-edit-modal-btn").addEventListener("click",(()=>{e.style.display="none"}))}}const c=document.querySelector(".add-project-modal"),l=document.getElementById("add-project-btn"),o=document.getElementById("add-project-form-btn"),a=document.getElementById("close-project-form-btn");l.addEventListener("click",(()=>{c.style.display="flex"})),o.addEventListener("click",(e=>{e.preventDefault();const d=document.getElementById("form-project-title"),s=new t(d.value);n.push(s),d.value="",t.renderProjects(),t.setCurrentProject(s),c.style.display="none"})),a.addEventListener("click",(()=>{c.style.display="none"}));const r=document.getElementById("add-task"),m=document.querySelector(".task-add-modal"),u=document.getElementById("add-task-btn"),p=document.getElementById("close-modal-btn");r.addEventListener("click",(()=>{m.style.display="flex"})),u.addEventListener("click",(e=>{e.preventDefault(),m.style.display="none";const t=document.getElementById("task-title-input"),n=document.getElementById("task-desc-input"),s=document.getElementById("task-date-input"),c=document.getElementById("task-priority-input"),l=new i(t.value,n.value,s.value,c.value);d.tasks.push(l),l.render()})),p.addEventListener("click",(()=>{m.style.display="none"})),t.renderProjects()})();